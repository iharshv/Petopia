<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Petopia</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>

    <header>
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="logo">
                    <img src="assets/logo-white.png" alt="Petopia Logo">
                </a>
                <ul class="nav-links">
                    <li><a href="index.html#why-petopia">Why Petopia</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="index.html#reviews">Reviews</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="booking.html" class="btn btn-primary" style="padding: 5px 15px;">Book Appointment</a>
                    </li>
                </ul>
                <div class="nav-contact-items">
                    <a href="https://maps.app.goo.gl/64Y1J6REaj2DGpYf6" target="_blank"
                        style="color: white; text-decoration: underline;">Airoli, Navi Mumbai</a>
                </div>
                <div class="auth-links" style="color: white; margin-left: 15px;">
                    <a href="login.html">Login</a> <span style="color: var(--primary);">|</span> <a href="register.html"
                        style="color: var(--primary);">Register</a>
                </div>
        </div>
        </nav>
        </div>
    </header>

    <div class="container"
        style="padding: 6rem 0; min-height: 60vh; display: flex; align-items: center; justify-content: center;">
        <div
            style="width: 100%; max-width: 400px; background: var(--white); padding: 2rem; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 1px solid #eee;">
            <h2 style="text-align: center; margin-bottom: 2rem;">Join <span>Petopia</span></h2>
            <div id="message"
                style="display: none; padding: 10px; border-radius: 5px; margin-bottom: 1rem; text-align: center;">
            </div>
            <form id="registerForm">
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" required placeholder="+91 XXXXX XXXXX">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required minlength="6">
                </div>
                <div class="form-group">
                    <label for="confirm-password">Confirm Password</label>
                    <input type="password" id="confirm-password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;" id="submitBtn">Create
                    Account</button>
            </form>
            <script src="api-config.js"></script>
            <script>
                document.getElementById('registerForm').addEventListener('submit', async function (e) {
                    e.preventDefault();

                    const password = document.getElementById('password').value;
                    const confirmPassword = document.getElementById('confirm-password').value;
                    const messageDiv = document.getElementById('message');
                    const submitBtn = document.getElementById('submitBtn');

                    if (password !== confirmPassword) {
                        messageDiv.style.display = 'block';
                        messageDiv.style.background = '#ffe6e6';
                        messageDiv.style.color = '#cc0000';
                        messageDiv.textContent = 'Passwords do not match!';
                        return;
                    }

                    submitBtn.textContent = 'Creating Account...';
                    submitBtn.disabled = true;

                    const apiUrl = (window.API_BASE_URL || '') + '/api/register';

                    try {
                        console.log('Registering at:', apiUrl);
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                name: document.getElementById('name').value,
                                email: document.getElementById('email').value,
                                phone: document.getElementById('phone').value,
                                password: password
                            })
                        });

                        let data;
                        const contentType = response.headers.get("content-type");
                        if (contentType && contentType.indexOf("application/json") !== -1) {
                            data = await response.json();
                        } else {
                            const text = await response.text();
                            throw new Error('Server returned non-JSON response: ' + text.substring(0, 100));
                        }

                        if (data.success) {
                            messageDiv.style.display = 'block';
                            messageDiv.style.background = '#e6ffe6';
                            messageDiv.style.color = '#008000';
                            messageDiv.textContent = 'Registration successful! Redirecting to login...';
                            setTimeout(() => window.location.href = 'login.html', 1500);
                        } else {
                            messageDiv.style.display = 'block';
                            messageDiv.style.background = '#ffe6e6';
                            messageDiv.style.color = '#cc0000';
                            messageDiv.textContent = data.error || 'Registration failed';
                            submitBtn.textContent = 'Create Account';
                            submitBtn.disabled = false;
                        }
                    } catch (error) {
                        console.error('Registration fetch error:', error);
                        messageDiv.style.display = 'block';
                        messageDiv.style.background = '#ffe6e6';
                        messageDiv.style.color = '#cc0000';
                        messageDiv.textContent = 'Registration Error: ' + error.message;
                        submitBtn.textContent = 'Create Account';
                        submitBtn.disabled = false;
                    }
                });
            </script>
            <p style="text-align: center; margin-top: 1rem; font-size: 0.9rem;">
                Already have an account? <a href="login.html" style="color: var(--primary); font-weight: 600;">Login
                    here</a>
            </p>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-grid">
                <div>
                    <h3>Petopia</h3>
                    <p>Your one-stop shop for all things pet.</p>
                    <div style="margin-top: 1rem;">
                        <p><i class="fas fa-map-marker-alt"></i> <a href="https://maps.app.goo.gl/64Y1J6REaj2DGpYf6"
                                target="_blank" style="color: #bbb;">Yash Paradise, Shop No 30, Sector 8A, Airoli, Navi
                                Mumbai - 400708</a></p>
                        <p><i class="fas fa-phone"></i> +91 9987801581 | +91 9867120142 | +91 8169223723</p>
                        <p><i class="fas fa-envelope"></i> connectpetopia@gmail.com</p>
                    </div>
                </div>
                <div>
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="services.html">Services</a></li>
                        <li><a href="booking.html">Book Appointment</a></li>
                        <li><a href="career.html">Careers</a></li>
                    </ul>
                </div>
                <div>
                    <h3>Information</h3>
                    <ul>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="terms.html">Terms & Conditions</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            <div
                style="text-align: center; margin-top: 3rem; border-top: 1px solid #333; padding-top: 1rem; font-size: 0.8rem; color: #888;">
                &copy; 2026 Petopia. All rights reserved.
            </div>
        </div>
    </footer>

</body>

</html>